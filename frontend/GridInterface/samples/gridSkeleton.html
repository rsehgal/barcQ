<html>
<head>
	<style type="text/css">
		
		.overlap{
			border : solid black 1px;
			position: relative;
		}

		.box{
        width: 100%;
        height: 100%;            
        position: absolute;
        top: 0;
        left: 0;
        opacity: 0.8;  /* for demo purpose  */
        border : solid black 2px;
    	}

    	.stack-top{
    		width: 100%;
        height: 100%;
        z-index: 9;
        margin: 0px; /* for demo purpose  */
        border : solid red 1px;
    	}

    	#parentForOverlappingDiv{
    		left: 50;
    		right: 50;
    		width: 1000;
    		height: 1000;
    		position: relative;
    	}

	</style>
<link rel="stylesheet" href="../../css/tabstyle.css">
<link rel="stylesheet" href="../../css/grid.css">

	<script src = "../../jsonschemas/allowedUserDefinedGate.json"></script>
	<script src = "../../jsonschemas/gatesUIExtended.json"></script>
	<script src = '../../js/jquery.js'> </script>
    <script src = '../../js/jquery-ui.js'> </script>
    <script src="../../js/createdropzone.js"></script>
    <script src = "../../js/globalvars.js"></script>
    <script src = "../../js/toolbox_v2.js"></script>
    <script src = "../../js/cloneanddrag.js"></script>
    <script src = "../../js/selectanddelete.js"></script>
    <script src = "../../js/mergeandunmerge.js"></script>
    <script src = "../../js/gridtojson.js"></script>
    <script src = "../../js/core.js"></script>
    <script src = "../../js/loadjson.js"></script>
    <script src = "../../js/d3.v3.min.js"></script>
    <script src = "../../js/gridinputlines.js"></script>
    <script src = "../../js/redesigngrid.js"></script>
    <script src = "../../js/gatessymbol.js"></script>
    <script src = "../../js/userdefinedcontrolgates.js"></script>
	<script src = "../../js/checkdiv.js"></script>
	<script src="../../js/tabbedInterface.js"></script>
	<script src="../../js/plotly-latest.min.js"></script>
	    <script>
	    $(document).ready(function(){
	    	CreateToolBox();
	    	CreateDropzone();
	    	//MakeCloneAble();
	    	//AttachSelectAndDelete();
			AttachDraggableEvents();
             AttachDroppableEvents();
	    	CoreTest();
	    	$("#mergebutton").click(function(){
        	    GridToJson();
 			});
 			$("#loadbutton").click(function(){
        	    LoadJson();
 			});
 			AddInputLinesToGrid();
 			InsertConnectorOnGrid();
 			ControlGateInitialization();
 			$("#create").click(function(){
 				StoreDivIds();	
 			});

 			//Trying to call server side function written in cherryPy
 			$("#submitButton").click(function(e){
                        $.post("/CodeGenerator",{"jsonObj" : JSON.stringify(circuitJsonObj)},function(data) {
                			console.log("Reverse function calle........");
                			data=JSON.parse(data);
                			console.log(data);
                            //$("#title").html(data["title"]) ;
                            console.log("Plot X : "+data["xdata"])
                            console.log("Plot Y : "+data["ydata"])
                            $("#title").html(data["ydata"]) ;
               	})
                 .done(function() {
               		console.log("Server side function called........");
            	});
           	e.preventDefault();

            /*
			//This also works, keeping it just for the future reference
            var request = $.ajax({'url': '/CodeGenerator'});
           	request.done(function(response) {
		        //$('#foo').text(response.foo);
		        //$('#baz').text(response.baz);
		        console.log("Data Received : "+response);
		        $("#title").html(response);
		      });*/

            });

 			
		});
	</script>

    

</head>

<body id="body">


	<!-- Trying to create tabbed interface 	-->
	<h2>Welcome to BarcQ</h2>
	<!-- <p>Click on the buttons inside the tabbed menu:</p> -->

	<div class="tab">
  <button class="tablinks" onclick="openCity(event, 'circuitComposer')">Circuit Editor</button>
  <button class="tablinks" onclick="openCity(event, 'qutipCode')">QuTiP code</button>
  <button class="tablinks" onclick="openCity(event, 'results')">Results</button>
  
</div>


	<!-- ---------------------------------- -->
	<div id="circuitComposer" class="tabcontent">
	<table>
		<tr> 
			<td>
				<div id="toolboxDivSingle" class="toolbox"></div>
			</td>
			<td>
				<div id="toolboxDivMultiple" class="toolbox"></div>
			</td>
	<!-- <div id="clonedElement"></div> -->
			<td>
			<div id="parentForOverlappingDiv">
				<div id="linesDiv" class="box"></div>
				<div id="svgDropDiv" class="box stack-top" >
					<svg xmlns="http://www.w3.org/2000/svg" id="testSvg" width="1000" height="1000">
						<g id="testGroup">
  							<foreignObject x="0" y="0" width=500 height=500 >
								<div id="dropzoneDiv"></div>
							</foreignObject>
							<!-- <line x1=9 y1=36 x2=729 y2=36 stroke-width=2 stroke="red"></line> -->
						</g>
					</svg>
				</div>
				
			</div>
			</td>
		</tr>
	</table>
	
	<button type="button" id="mergebutton">Export JSON</button>
	<button type="button" id="loadbutton">Load Circuit</button>
	<button type="button" id="create">New Controlled Gate</button>
	<button type="button" id="display">Create Gate</button>
	<button type="button" id="submitButton">Submit</button>
	<h1 id = "title">What's your name?</h1>
	<!-- </div> -->
	<!-- </foreignObject> -->
<!-- </svg> -->

</div>

<div id="qutipCode" class="tabcontent monospace"></div>

<div id="results"  class="tabcontent">
<!-- For each new plot, just add a div below -->
	<div id="plotHist"></div>
	<div id="countPlot"></div>
	<div id="sumPlot"></div>
</div>
	

</body>

</html>
