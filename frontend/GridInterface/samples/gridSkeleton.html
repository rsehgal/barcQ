<html>
<head>
<link rel="stylesheet" href="../../css/tabstyle.css">
<link rel="stylesheet" href="../../css/grid.css">


	<script src = "../../jsonschemas/gatesUIExtended.json"></script>
	<script src = '../../js/jquery.js'> </script>
    <script src = '../../js/jquery-ui.js'> </script>
    <script src = "../../js/globalvars.js"></script>
    <script src = "../../js/toolbox_v2.js"></script>
    <script src = "../../js/cloneanddrag.js"></script>
    <script src = "../../js/selectanddelete.js"></script>
    <script src = "../../js/mergeandunmerge.js"></script>
    <script src = "../../js/gridtojson.js"></script>
    <script src = "../../js/core.js"></script>
    <script src = "../../js/loadjson.js"></script>
    <script src = "../../js/d3.v3.min.js"></script>
    <script src = "../../js/gridinputlines.js"></script>
    <script src = "../../js/redesigngrid.js"></script>
    <script src = "../../js/gatessymbol.js"></script>
    <script src = "../../js/userdefinedcontrolgates.js"></script>
	<script src = "../../js/checkdiv.js"></script>
	<script src="../../js/tabbedInterface.js"></script>
	<script src="../../js/plotly-latest.min.js"></script>
	    <script>
	    $(document).ready(function(){
	    	CreateToolBox();
	    	//MakeCloneAble();
	    	//AttachSelectAndDelete();
			AttachDraggableEvents();
             AttachDroppableEvents();
	    	CoreTest();
	    	$("#mergebutton").click(function(){
        	    GridToJson();
 			});
 			$("#loadbutton").click(function(){
        	    LoadJson();
 			});
 			AddInputLinesToGrid();
 			InsertConnectorOnGrid();
 			ControlGateInitialization();
 			$("#create").click(function(){
 				StoreDivIds();	
 			});

 			//Trying to call server side function written in cherryPy
 			$("#submitButton").click(function(e){
                        $.post("/CodeGenerator",{"jsonObj" : JSON.stringify(circuitJsonObj)},function(data) {
                			console.log("Reverse function calle........");
                			data=JSON.parse(data);
                			console.log(data);
                            //$("#title").html(data["title"]) ;
                            console.log("Plot X : "+data["xdata"])
                            console.log("Plot Y : "+data["ydata"])
                            $("#title").html(data["ydata"]) ;
               	})
                 .done(function() {
               		console.log("Server side function called........");
            	});
           	e.preventDefault();

            /*
			//This also works, keeping it just for the future reference
            var request = $.ajax({'url': '/CodeGenerator'});
           	request.done(function(response) {
		        //$('#foo').text(response.foo);
		        //$('#baz').text(response.baz);
		        console.log("Data Received : "+response);
		        $("#title").html(response);
		      });*/

            });

 			
		});
	</script>

    

</head>

<body id="body">


	<!-- Trying to create tabbed interface 	-->
	<h2>Welcome to BarcQ</h2>
	<!-- <p>Click on the buttons inside the tabbed menu:</p> -->

	<div class="tab">
  <button class="tablinks" onclick="openCity(event, 'circuitComposer')">Circuit Editor</button>
  <button class="tablinks" onclick="openCity(event, 'qutipCode')">QuTiP code</button>
  <button class="tablinks" onclick="openCity(event, 'results')">Results</button>
  
</div>


	<!-- ---------------------------------- -->
	<div id="circuitComposer" class="tabcontent">
	<table>
		<tr> 
			<td>
				<div id="toolboxDivSingle" class="toolbox"></div>
			</td>
			<td>
				<div id="toolboxDivMultiple" class="toolbox"></div>
			</td>
	<!-- <div id="clonedElement"></div> -->
			<td>
	<svg xmlns="http://www.w3.org/2000/svg" id="testSvg" width="1000" height="1000">
  	<foreignObject x="10" y="10" width=500 height=500 >
	<div id="dropzoneDiv">

	<table border="0" id="dropzonetable" cellpadding=1 cellspacing=0>
		<tr id="row0">
			<td id="row0col0">
				<div id="row0col0div" name="" rowId="0" columnId="0" class="dropzone" gate="" num_bits="" 
				ctl_enabled="" ctl_bits="" tgt_bits="" arg_enabled=0 arg_value=0> 
				
				</div>
			</td>
			<td id="row0col1">
				<div id="row0col1div" name="" rowId="0" columnId="1" class="dropzone" gate="" num_bits="" 
				ctl_enabled="" ctl_bits="" tgt_bits="" arg_enabled=0 arg_value=0>
				
			</div></td>
			<td id="row0col2">
				<div id="row0col2div" name="" rowId="0" columnId="2" class="dropzone" gate="" num_bits="" 
				ctl_enabled="" ctl_bits="" tgt_bits="" arg_enabled=0 arg_value=0></div></td>
			<td id="row0col3">
				<div id="row0col3div" name="" rowId="0" columnId="3" class="dropzone" gate="" num_bits="" 
				ctl_enabled="" ctl_bits="" tgt_bits="" arg_enabled=0 arg_value=0></div></td>
			<td id="row0col4">
				<div id="row0col4div" name="" rowId="0" columnId="4" class="dropzone" gate="" num_bits="" 
				ctl_enabled="" ctl_bits="" tgt_bits="" arg_enabled=0 arg_value=0></div></td>
		</tr>
 
		<tr id="row1">
			<td id="row1col0">
				<div id="row1col0div" name="" rowId="1" columnId="0" class="dropzone" gate="" num_bits="" 
				ctl_enabled="" ctl_bits="" tgt_bits="" arg_enabled=0 arg_value=0>
				
			</div></td>
			<td id="row1col1">
				<div id="row1col1div" name="" rowId="1" columnId="1" class="dropzone" gate="" num_bits="" 
				ctl_enabled="" ctl_bits="" tgt_bits="" arg_enabled=0 arg_value=0></div>
			</td>
			<td id="row1col2">
				<div id="row1col2div" name="" rowId="1" columnId="2" class="dropzone" gate="" num_bits="" 
				ctl_enaforeignObjectbled="" ctl_bits="" tgt_bits="" arg_enabled=0 arg_value=0></div></td>
			<td id="row1col3">
				<div id="row1col3div" name="" rowId="1" columnId="3" class="dropzone" gate="" num_bits="" 
				ctl_enabled="" ctl_bits="" tgt_bits="" arg_enabled=0 arg_value=0></div></td>
			<td id="row1col4"><div id="row1col4div" name="" rowId="1" columnId="4" class="dropzone" gate="" num_bits="" 
				ctl_enabled="" ctl_bits="" tgt_bits="" arg_enabled=0 arg_value=0></div></td>
		</tr>

		<tr id="row2">
			<td id="row2col0"><div id="row2col0div" name="" rowId="2" columnId="0" class="dropzone" gate="" num_bits="" 
				ctl_enabled="" ctl_bits="" tgt_bits="" arg_enabled=0 arg_value=0></div></td>
			<td id="row2col1"><div id="row2col1div" name="" rowId="2" columnId="1" class="dropzone" gate="" num_bits="" 
				ctl_enabled="" ctl_bits="" tgt_bits="" arg_enabled=0 arg_value=0></div></td>
			<td id="row2col2"><div id="row2col2div" name="" rowId="2" columnId="2" class="dropzone" gate="" num_bits="" 
				ctl_enabled="" ctl_bits="" tgt_bits="" arg_enabled=0 arg_value=0></div></td>
			<td id="row2col3"><div id="row2col3div" name="" rowId="2" columnId="3" class="dropzone" gate="" num_bits="" 
				ctl_enabled="" ctl_bits="" tgt_bits="" arg_enabled=0 arg_value=0></div></td>
			<td id="row2col4"><div id="row2col4div" name="" rowId="2" columnId="4" class="dropzone" gate="" num_bits="" 
				ctl_enabled="" ctl_bits="" tgt_bits="" arg_enabled=0 arg_value=0></div></td>
		</tr>

		<tr id="row3">
			<td id="row3col0"><div id="row3col0div" name="" rowId="3" columnId="0" class="dropzone" gate="" num_bits="" 
				ctl_enabled="" ctl_bits="" tgt_bits=""></div></td>
			<td id="row3col1"><div id="row3col1div" name="" rowId="3" columnId="1" class="dropzone" gate="" num_bits="" 
				ctl_enabled="" ctl_bits="" tgt_bits="" arg_enabled=0 arg_value=0></div></td>
			<td id="row3col2"><div id="row3col2div" name="" rowId="3" columnId="2" class="dropzone" gate="" num_bits="" 
				ctl_enabled="" ctl_bits="" tgt_bits="" arg_enabled=0 arg_value=0></div></td>
			<td id="row3col3"><div id="row3col3div" name="" rowId="3" columnId="3" class="dropzone" gate="" num_bits="" 
				ctl_enabled="" ctl_bits="" tgt_bits="" arg_enabled=0 arg_value=0></div></td>
			<td id="row3col4"><div id="row3col4div" name="" rowId="3" columnId="4" class="dropzone" gate="" num_bits="" 
				ctl_enabled="" ctl_bits="" tgt_bits="" arg_enabled=0 arg_value=0></div></td>
		</tr>

		<tr id="row4">
			<td id="row4col0"><div id="row4col0div" name="" rowId="4" columnId="0" class="dropzone" gate="" num_bits="" 
				ctl_enabled="" ctl_bits="" tgt_bits="" arg_enabled=0 arg_value=0></div></td>
			<td id="row4col1"><div id="row4col1div" name="" rowId="4" columnId="1" class="dropzone" gate="" num_bits="" 
				ctl_enabled="" ctl_bits="" tgt_bits="" arg_enabled=0 arg_value=0></div></td>
			<td id="row4col2"><div id="row4col2div" name="" rowId="4" columnId="2" class="dropzone" gate="" num_bits="" 
				ctl_enabled="" ctl_bits="" tgt_bits="" arg_enabled=0 arg_value=0></div></td>
			<td id="row4col3"><div id="row4col3div" name="" rowId="4" columnId="3" class="dropzone" gate="" num_bits="" 
				ctl_enabled="" ctl_bits="" tgt_bits="" arg_enabled=0 arg_value=0></div></td>
			<td id="row4col4"><div id="row4col4div" name="" rowId="4" columnId="4" class="dropzone" gate="" num_bits="" 
				ctl_enabled="" ctl_bits="" tgt_bits="" arg_enabled=0 arg_value=0></div></td>
		</tr>
	</table>

	<button type="button" id="mergebutton">Export JSON</button>
	<button type="button" id="loadbutton">Load Circuit</button>
	<button type="button" id="create">New Controlled Gate</button>
	<button type="button" id="display">Create Gate</button>
	<button type="button" id="submitButton">Submit</button>
	<h1 id = "title">What's your name?</h1>
	</div>
	</foreignObject>
</svg>
</td>
</tr>
</table>
</div>

<div id="qutipCode" class="tabcontent monospace"></div>

<div id="results"  class="tabcontent">
<!-- For each new plot, just add a div below -->
	<div id="plotHist"></div>
	<div id="countPlot"></div>
	<div id="sumPlot"></div>
</div>
	

</body>

</html>
